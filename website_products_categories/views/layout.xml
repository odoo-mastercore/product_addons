<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="products_attributes_inherit_giro_custom" inherit_id="website_sale.products_categories" name="Product Attribute's Filters Inherit">
        <xpath expr="//div[@id='wsale_products_categories_collapse']" position="before">
            <form class="js_attributes mb-2" method="get">
                <t t-set="v_vehicle_type" t-value="request.httprequest.args.get('vehicle_type') or vehicle_type"/>
                <h6>Tipo</h6>
                <select class="form-control form-field mb-3" name="vehicle_type">
                    <t t-foreach="vehicles_types" t-as="v">
                        <option t-att-value="v[0]" t-att-selected="v_vehicle_type == v[0]"><t t-esc="v[1]"/></option>
                    </t>
                </select>
                <!-- <t t-set="brands" t-value="request.env['dr.product.brand'].search(website.website_domain())"/>
                <h6 class="mb-0">Marca</h6>
                <select class="form-control form-field mb-3">
                    <option t-att-value="None">Todos</option>
                    <t t-foreach="brands" t-as="brand">
                        <option t-att-value="'0-%s' % (brand.id)"><t t-esc="brand.name"/></option>
                    </t>
                </select> -->
                <h6 class="mb-0">Modelo</h6>
                <t t-set="v_model" t-value="request.httprequest.args.get('model') or model"/>
                <select class="form-control form-field mb-3" name="model">
                    <option t-att-value="None">Todos</option>
                    <t t-foreach="vehicle_models" t-as="m">
                        <option t-att-value="m.id" t-att-selected="v_model == str(m.id)"><t t-esc="m.name"/></option>
                    </t>
                </select>
                <h6>AÃ±o</h6>
                <t t-set="v_min_age" t-value="request.httprequest.args.get('year_end') or min_age"/>
                <t t-set="v_max_age" t-value="request.httprequest.args.get('year_start') or max_age"/>
                <div class="tp-product-price-filter my-3">
                    <div class="form-row align-items-center justify-content-center mt-2">
                        <div class="col-6">
                            <p class="mb-0">
                                Desde:
                            </p>
                            <select class="form-control form-field mb-3" name="year_end">
                                <option t-att-value="None"></option>
                                <t t-foreach="years_end" t-as="a">
                                    <option t-att-value="a" t-att-selected="str(a) == v_min_age"><t t-esc="a"/></option>
                                </t>
                            </select>
                        </div>
                    
                        <div class="col-6">
                            <p class="mb-0">
                                Hasta:
                            </p>
                            <select class="form-control form-field mb-3" name="year_start">
                                <option t-att-value="None"></option>
                                <t t-foreach="years_start" t-as="a">
                                    <option t-att-value="a" t-att-selected="str(a) == v_max_age"><t t-esc="a"/></option>
                                </t>
                            </select>
                        </div>
                    </div>
                </div>
            </form>
        </xpath>
    </template>
</odoo>