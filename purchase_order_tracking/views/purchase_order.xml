<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <record id="purchase_order_form_inherit_order_tracking" model="ir.ui.view">
        <field name="name">purchase.order.form.inherit.order.tracking</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_ref']" position="attributes">
                <attribute name="string">Número factura del proveedor</attribute>
            </xpath>
            <xpath expr="//field[@name='currency_id']" position="after">
                <field name="warehouse_company" />
            </xpath>
            <xpath expr="//field[@name='date_order']" position="after">
                <field name="purchase_type" string="Tipo de Compra"/>
                <field
                    name="origin_purchase"
                    string="Origen de la compra"
                    placeholder="Pais"
                    class="o_address_country"
                    options='{"no_open": True, "no_create": True}'
                    />
                <field name="load_type" string="Tipo de carga"/>
                <field name="stage_identifier" invisible="1"/>
                <label for="weight_total" />
                <div class="o_row" name="weight_total">
                    <field name="weight_total"/>
                    <span><field name="weight_uom_name"/></span>
                </div>
                <label for="volume_total" />
                <div class="o_row" name="volume_total" >
                    <field name="volume_total"/>
                    <span><field name="volume_uom_name"/></span>
                </div>
            </xpath>
            <xpath expr="//field[@name='product_qty']" position="before">
                <field name="weight" attrs="{'column_invisible': [('parent.purchase_type', 'in', 'national')]}" />
                <field name="volume" attrs="{'column_invisible': [('parent.purchase_type', 'in', 'national')]}" />
                <field name="weight_kg" attrs="{'column_invisible': [('parent.purchase_type', 'in', 'international')]}" />
                <field name="volume_mc" attrs="{'column_invisible': [('parent.purchase_type', 'in', 'international')]}" />
            </xpath>
            <xpath expr="//page[@name='purchase_delivery_invoice']" position="before">
                <page
                    string="Colocación de Orden de Compra"
                    attrs="{
                        'invisible': [('stage_identifier', 'not in', ('purchase_order', 'invoice_payment', 'transit_warehouse', 'transit_marine_land', 'stock_reception', 'cost_verification', 'partial_delivery'))]
                    }">
                    <group name="order_privider">
                        <field name="oc_provider_ids" context="{'default_purchase_order_id': id}" nolabel="1">
                            <tree>
                                <field name="provider_estimated_date" />
                                <field name="provider_recognition_date" />
                                <field name="provider_recognition_number" />
                                <field name="purchase_order_id" invisible="1" />
                            </tree>
                        </field>
                    </group>
                </page>
                <page
                    string="Facturación/Pago"
                    attrs="{
                        'invisible': [('stage_identifier', 'not in', ('invoice_payment', 'transit_warehouse', 'transit_marine_land', 'stock_reception', 'cost_verification', 'partial_delivery'))]
                    }">
                    <field name="supplier_ids" widget="many2many">
                        <tree>
                            <field name="name" />
                            <field name="invoice_date" string="Fecha factura" />
                            <field name="weight_provider_total" string="Peso" />
                            <field name="volume_provider_total" string="Volumen"/>
                            <field name="amount_total" />
                            <field name="state" />
                            <field name="invoice_payment_state" />
                        </tree>
                    </field>
                    <group>
                        <group>
                            <label for="supplier_weight_total" />
                            <div class="o_row" name="supplier_weight_total">
                                <field name="supplier_weight_total"/>
                                <span><field name="weight_uom_name"/></span>
                            </div>
                            <label for="supplier_volume_total" />
                            <div class="o_row" name="supplier_volume_total">
                                <field name="supplier_volume_total"/>
                                <span><field name="volume_uom_name"/></span>
                            </div>
                        </group>
                    </group>
                </page>
                <page
                    string="Tránsito Warehouse"
                    attrs="{
                        'invisible': [('stage_identifier', 'not in', ('transit_warehouse', 'transit_marine_land', 'stock_reception', 'cost_verification', 'partial_delivery'))]
                    }">
                    <group string="Warehouses">
                        <field name="transit_warehouse_ids" context="{'default_purchase_order_id': id}" nolabel="1">
                            <tree>
                                <field name="tracking_number" />
                                <field name="shipping_company" />
                                <field name="warehouse_number" />
                                <field name="warehouse_receipt_date" />
                                <field name="order_picking_id" />
                            </tree>
                        </field>
                    </group>
                    <group name="warehouse_invoices" string="Facturas Warehouse">
                        <field name="invoice_warehouse_ids" widget="many2many" nolabel="1">
                            <tree>
                                <field name="name" />
                                <field name="partner_id" string="Empresa warehouse"/>
                                <field name="invoice_date" string="Fecha factura" />
                                <field name="weight_provider_total" string="Peso" />
                                <field name="volume_provider_total" string="Volumen"/>
                                <field name="amount_total" />
                                <field name="state" />
                                <field name="invoice_payment_state" />
                            </tree>
                        </field>
                    </group>
                    <group>
                        <group>
                            <label for="warehouse_weight_total" />
                            <div class="o_row" name="warehouse_weight_total">
                                <field name="warehouse_weight_total"/>
                                <span><field name="weight_uom_name"/></span>
                            </div>
                            <label for="warehouse_volume_total" />
                            <div class="o_row" name="warehouse_volume_total">
                                <field name="warehouse_volume_total"/>
                                <span><field name="volume_uom_name"/></span>
                            </div>
                        </group>
                        <group></group>
                    </group>
                </page>
                <page
                    string="Tránsito Maritimo/Terrestre"
                    attrs="{
                        'invisible': [('stage_identifier', 'not in', ('transit_marine_land', 'stock_reception', 'cost_verification', 'partial_delivery'))]
                    }">
                    <group name="transit_land_maritime" string="Tránsito">
                        <field name="transit_land_maritime_ids" context="{'default_purchase_order_id': id}" nolabel="1">
                            <tree>
                                <field name="trip_name" />
                                <field name="shipowner" />
                                <field name="booking_number" />
                                <field name="ship_name" />
                                <field name="bl" />
                                <field name="port_arrival" />
                                <field name="order_picking_id" />
                            </tree>
                        </field>
                    </group>
                </page>
                <page
                    string="Recepción almacén"
                    attrs="{
                        'invisible': [('stage_identifier', 'not in', ('stock_reception', 'cost_verification'))]
                    }">
                    <group>
                        <field name="stock_receipt_ids" context="{'default_purchase_order_id': id}" nolabel="1">
                            <tree>
                                <field name="stock_receipt_date" />
                                <field name="order_picking_id" />
                            </tree>
                        </field>
                    </group>
                </page>
                <page
                    string="Verificacón de Costos"
                    attrs="{
                        'invisible': [('stage_identifier', 'not in', ('cost_verification'))]
                    }">
                </page>
            </xpath>
            <xpath expr="//page[@name='purchase_delivery_invoice']" position="after">
                <page string="Tiempos estimados">
                </page>
            </xpath>
        </field>
    </record>

    <record id="oc_provider_view_form" model="ir.ui.view">
        <field name="name">oc.provider.view.form</field>
        <field name="model">order.purchase.provider</field>
        <field name="arch" type="xml">
            <form string="Colocación Order de compra">
                <sheet>
                    <group>
                        <group>
                            <field name="provider_estimated_date" string="Fecha estamida del proveedor"/>
                            <field name="purchase_order_id" invisible="1" />
                        </group>
                        <group>
                            <field name="provider_recognition_date" string="Fechas de reconocimiento" />
                            <field name="provider_recognition_number" string="Número de reconocimiento" />
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>


    <record id="transit_warehouse_view_form" model="ir.ui.view">
        <field name="name">transit.warehouse.view.form</field>
        <field name="model">transit.warehouse</field>
        <field name="arch" type="xml">
            <form string="Warehouse">
                <sheet>
                    <group>
                        <group>
                            <field name="purchase_order_id" />
                            <field name="tracking_number" />
                            <field name="shipping_company" />
                        </group>
                        <group>
                            <field name="warehouse_number" />
                            <field name="warehouse_receipt_date" />
                            <field
                                name="order_picking_id"
                                options="{'no_open': 'True', 'no_create_edit': True, 'no_quick_create': True}"
                                />
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="transit_land_maritime_view_form" model="ir.ui.view">
        <field name="name">transit.land.maritime.view.form</field>
        <field name="model">transit.land.maritime</field>
        <field name="arch" type="xml">
            <form string="Tránsito">
                <sheet>
                    <group>
                        <group>
                            <field name="purchase_order_id"  invisible="1"/>
                            <field name="trip_name" />
                            <field name="shipowner" />
                            <field name="booking_number" />
                            <field name="ship_name" />
                            <field name="container_number" />
                        </group>
                        <group>
                            <field name="bl" />
                            <field name="port_arrival" />
                            <field name="estimated_departure_date" />
                            <field name="estimated_port_arrival" />
                            <field name="real_date_arrival" />
                            <field
                                name="order_picking_id"
                                options="{'no_open': 'True', 'no_create_edit': True, 'no_quick_create': True}"
                                />
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="stock_receipt_view_form" model="ir.ui.view">
        <field name="name">stock.receipt.view.form</field>
        <field name="model">stock.receipt</field>
        <field name="arch" type="xml">
            <form string="Recepción Almacen">
                <sheet>
                    <group>
                        <group>
                            <field name="purchase_order_id" invisible="1" />
                            <field name="stock_receipt_date" />
                        </group>
                        <group>
                            <field
                                name="order_picking_id"
                                options="{'no_open': 'True', 'no_create_edit': True, 'no_quick_create': True}"
                                />
                        </group>
                    </group>
                    <group>
                        <field name="observations" />
                    </group>
                </sheet>
            </form>
        </field>
    </record>
</odoo>